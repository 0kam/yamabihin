# 2. カメラ管理アプリ
備品管理アプリと連携して、山に設置されている定点カメラの構成や管理状況を把握するためのアプリです。

## 概要
山岳班では、一眼レフカメラを改造した定点カメラを山に設置し、観測を行っています。カメラは各部品（カメラ本体、レンズ、バッテリー、ソーラーパネル等）で構成されており、メンテナンスの頻度も高いため、その管理を効率的に行う必要があります。

カメラ管理アプリは、以下の機能を提供します：
- 各カメラセットの基本情報管理（設置場所、状態等）
- カメラを構成する備品の管理（どの備品がどのカメラに使われているか）
- メンテナンス履歴の記録と次回メンテナンス予定の管理
- 設置状況や部品構成を説明する写真の登録・閲覧機能
- そのカメラで実際に撮られる写真の例を登録・閲覧する機能

## データベース
以下の3つのDBを持ち、相互に関連付けられるようにします。

1. camera_sets
camera_set_id, location, area_id, lon, lat, direction, installation_date, last_maintenance, next_maintenance, status, manager, description, who_wrote_this, when_wrote_this, description_image_paths, sample_image_paths

2. camera_components
component_id, camera_set_id, bihin_id, component_type, role, status, installation_date, who_wrote_this, when_wrote_this

3. camera_maintenances
maintenance_id, camera_set_id, maintenance_date, maintenance_type, description, performed_by, who_wrote_this, when_wrote_this, camera_maintenance_image_paths

## UI
### カメラセット一覧
トップページはカメラセットのリストを表形式で表示します。表の並び順はデフォルトでエリア別とし、状態や設置日でも並び替えられるようにします。
- エリアと場所によるフィルタリング機能
- カメラの状態（稼働中、メンテナンス中、故障中等）によるフィルタリング機能
- 次回メンテナンス予定が近いカメラを強調表示

### カメラセット登録
新しいカメラセットを登録するための画面です。
- 設置場所名称（自由入力）
- エリア（選択式、備品管理アプリと共通）
- 緯度・経度（地理院地図からピンで選択。以下のiframeが利用可能）
    ```
    <iframe frameborder="0" scrolling="no" marginheight="0" marginwidth="0" width="500" height="400" src="https://maps.gsi.go.jp/?hc=hic#6/38.453589/140.493164/&base=std&ls=std&disp=1&vs=c1g1j0h0k0l0u0t0z0r0s0m0f1"></iframe>
    ```
- 方位（選択式、南北東西、南東、南西、北東、北西）
- 設置日（カレンダーから選択）
- 最終メンテナンス日（カレンダーから選択、任意）
- 次回メンテナンス予定日（カレンダーから選択、任意）
- 状態（選択式：稼働中、メンテナンス中、故障中、撤去済み）
- 管理者（自由入力）
- 説明（自由入力、任意）
- 設置状況写真（画像、複数枚可能、任意）
- 撮影画像例（画像、1枚、任意）

### カメラセット詳細
各カメラセットの詳細情報を表示します。
- 基本情報（ID、設置場所、エリア、設置日等）
- 構成部品一覧（どの備品が使われているか）
- メンテナンス履歴
- 編集・削除ボタン

### 構成部品管理
カメラを構成する部品（備品）を追加・管理するための画面です。
- 備品の検索・選択機能（備品管理アプリのデータを参照）
- 部品タイプの指定（選択式：カメラ本体、レンズ、バッテリー、ソーラーパネル、SDカード、その他）
- 役割の入力（自由入力、任意）
- 状態の指定（選択式：正常、劣化、故障）
- 組み込み日（カレンダーから選択）

### メンテナンス管理
カメラのメンテナンス履歴を記録・管理するための画面です。
- メンテナンス日（カレンダーから選択）
- メンテナンスタイプ（選択式：定期点検、バッテリー交換、SDカード交換、修理、その他）
- 説明（自由入力）
- 実施者（自由入力）
- 次回メンテナンス予定の更新（カレンダーから選択、任意）
- 参考写真（画像、複数選択可能、任意）

## 連携機能
備品管理アプリとの連携により、以下の機能を実現します：
1. カメラ構成部品として備品を選択する際、備品管理アプリのデータを参照
2. 部品交換等で備品の移動があった場合、自動的に備品管理アプリの移動履歴に反映
3. メンテナンス履歴と備品の移動履歴を相互に参照可能